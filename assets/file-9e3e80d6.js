var I=Object.defineProperty;var D=(i,a,e)=>a in i?I(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e;var m=(i,a,e)=>(D(i,typeof a!="symbol"?a+"":a,e),e);import{R as d,H as R,O as n,S as o,u as b,r as u,m as w,J as y,n as g,p as j,K as p,q as L,t as O,X as U}from"./firebase-b549415f.js";import{N as $}from"./index-f7a2ca74.js";const f=class{static get I(){return this._I}async upload(a){const e=new Date,s=$.I.userId$.value,c=d();async function t(){const{phrase:h}=await fetch("https://words-aas.vercel.app/api/a $adjective $noun").then(async v=>v.json());return(await p(n(o(c,"files"),h))).exists()?await t():h}const r=await t();return await R(n(o(c,"files"),r),{name:a.name,filetype:a.type,uploadDate:e,owner:s}),await b(u(w(),`${r}/${a.name}`),a),await y(n(o(c,"users"),s),{files:g(r)}),r}async download(a,e){const s=await j(u(w(),`${a}/${e}`)),c=await fetch(s).then(r=>r.blob()),t=document.createElement("a");t.href=window.URL.createObjectURL(c),t.download=e,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),t.remove()}async doesExist(a){return await p(n(o(d(),"files"),a)).then(e=>e.exists())}async getInfo(a){let e=await p(n(o(d(),"files"),a)).then(s=>s.data());if(!e)throw Error("Could not retrieve file metadata");return e.uploadDate=e.uploadDate.toDate(),e}async remove(a,e){await L(u(w(),`${a}/${e}`)),await y(n(o(d(),"users"),$.I.userId$.value),{files:O(a)}),await U(n(o(d(),"files"),a))}};let l=f;m(l,"_I",new f);const k=l;export{k as F};
