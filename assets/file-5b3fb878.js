import{p as P,q as j,r as B,s as H,v as W,y as z,w as K,x as V,z as $,u as q,a as G,A as J,E as p,b as O,C as X,j as Q,o as a,D as Y,c as I,G as Z,f as T,e as k,H as ee,g as M,S as ae,J as h,m as v,I as C,K as te,L as re,B as g,i as A,N as oe,M as ne,d as le,T as ie,k as ce,t as se}from"./index-14cc69d1.js";import{F as x}from"./file-d8a8b157.js";import"./firebase-b549415f.js";var de=function(){var r=document.getSelection();if(!r.rangeCount)return function(){};for(var t=document.activeElement,e=[],l=0;l<r.rangeCount;l++)e.push(r.getRangeAt(l));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return r.removeAllRanges(),function(){r.type==="Caret"&&r.removeAllRanges(),r.rangeCount||e.forEach(function(i){r.addRange(i)}),t&&t.focus()}};function _(){return _=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(r[l]=e[l])}return r},_.apply(this,arguments)}function ue(r,t){if(r==null)return{};var e={},l=Object.keys(r),i,o;for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}var fe=["className","rows"],me=P(function(r,t){var e=j("Textarea",r),l=B(r),i=l.className,o=l.rows,s=ue(l,fe),n=H(s),d=["h","minH","height","minHeight"],f=o?W(e,d):e;return z(V.textarea,_({ref:t,rows:o},n,{className:K("chakra-textarea",i),__css:f}))}),pe=de,U={"text/plain":"Text","text/html":"Url",default:"Text"},he="Copy to clipboard: #{key}, Enter";function ve(r){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return r.replace(/#{\s*key\s*}/g,t)}function ge(r,t){var e,l,i,o,s,n,d=!1;t||(t={}),e=t.debug||!1;try{i=pe(),o=document.createRange(),s=document.getSelection(),n=document.createElement("span"),n.textContent=r,n.ariaHidden="true",n.style.all="unset",n.style.position="fixed",n.style.top=0,n.style.clip="rect(0, 0, 0, 0)",n.style.whiteSpace="pre",n.style.webkitUserSelect="text",n.style.MozUserSelect="text",n.style.msUserSelect="text",n.style.userSelect="text",n.addEventListener("copy",function(c){if(c.stopPropagation(),t.format)if(c.preventDefault(),typeof c.clipboardData>"u"){e&&console.warn("unable to use e.clipboardData"),e&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=U[t.format]||U.default;window.clipboardData.setData(u,r)}else c.clipboardData.clearData(),c.clipboardData.setData(t.format,r);t.onCopy&&(c.preventDefault(),t.onCopy(c.clipboardData))}),document.body.appendChild(n),o.selectNodeContents(n),s.addRange(o);var f=document.execCommand("copy");if(!f)throw new Error("copy command was unsuccessful");d=!0}catch(c){e&&console.error("unable to copy using execCommand: ",c),e&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",r),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(u){e&&console.error("unable to copy using clipboardData: ",u),e&&console.error("falling back to prompt"),l=ve("message"in t?t.message:he),window.prompt(l,r)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(o):s.removeAllRanges()),n&&document.body.removeChild(n),i()}return d}var ye=ge;const we=$(ye);function _e({isOpen:r,onClose:t}){var S,F,R,E;const{i18n:e}=q(),[l]=G(),{wordCode:i}=l.params||{},o=J(async()=>{if(i)try{return await x.I.getInfo(i)}catch(m){p.I.notifyUserOfError(e.t("file.err_load"),m),t()}},[i]),[s,n]=O(async function(y,w){try{await x.I.download(y,w)}catch(b){p.I.notifyUserOfError(e.t("file.err_download"),b)}}),{isOpen:d,onOpen:f,onClose:c}=X(),[u,L]=O(async function(y,w){try{await x.I.remove(y,w),c(),t()}catch(b){p.I.notifyUserOfError(e.t("file.err_removing"),b)}});function N(){try{we(i),se({title:e.t("file.att_wc_copied"),status:"success",duration:2e3,isClosable:!0})}catch(m){p.I.notifyUserOfError(e.t("file.att_wc_copied_unsuccess"),m)}}const D=Q();return a(ce,{children:[a(Y,{placement:"right",onClose:t,isOpen:r,initialFocusRef:D,children:[a(I,{}),a(Z,{children:[a(T,{}),a(k,{borderBottomWidth:"1px",children:a(ee,{fontSize:"xl",children:e.t("file.file_info")})}),a(M,{pt:4,children:a(ae,{spacing:4,children:[a(h,{children:[a(v,{htmlFor:"filename",children:e.t("file.file_name")}),a(C,{value:((S=o.value)==null?void 0:S.name)||"",id:"filename",variant:o.loading?"filled":"outline",placeholder:e.t("file.plh_load"),isReadOnly:!0})]}),a(h,{children:[a(v,{htmlFor:"filetype",children:e.t("file.file_type")}),a(C,{value:((F=o.value)==null?void 0:F.filetype)||"",id:"filetype",variant:o.loading?"filled":"outline",placeholder:e.t("file.plh_load"),isReadOnly:!0})]}),a(h,{children:[a(v,{htmlFor:"uploadDate",children:e.t("file.file_date")}),a(C,{value:((R=o.value)==null?void 0:R.uploadDate.toLocaleString())||"",id:"uploadDate",variant:o.loading?"filled":"outline",placeholder:e.t("file.plh_load"),isReadOnly:!0})]}),a(te,{}),a(h,{children:[a(v,{htmlFor:"wordCode",children:e.t("file.file_wc")}),a(me,{ref:D,value:i,id:"wordCode",variant:"outline",isReadOnly:!0,fontFamily:"heading",fontWeight:"medium",fontSize:"lg",focusBorderColor:"green.500"}),a(re,{justify:"flex-end",mt:2,children:a(g,{colorScheme:"green",variant:"outline",onClick:N,children:e.t("file.btn_wc_copy")})})]})]})}),a(A,{borderTopWidth:"1px",children:[((E=o.value)==null?void 0:E.owner)===oe.I.userId$.value&&a(g,{colorScheme:"red",variant:"outline",mr:3,isLoading:u.loading,onClick:f,children:e.t("file.btn_remove")}),a(g,{colorScheme:"green",isLoading:s.loading,isDisabled:!o.value,onClick:()=>n(i,o.value.name),children:e.t("file.btn_download")})]})]})]}),a(ne,{isOpen:d,onClose:c,children:[a(I,{}),a(le,{children:[a(k,{children:e.t("file.modal_header")}),a(T,{}),a(M,{children:a(ie,{children:e.t("file.modal_text")})}),a(A,{children:a(g,{colorScheme:"red",isLoading:u.loading,onClick:()=>L(i,o.value.name),children:e.t("file.btn_remove")})})]})]})]})}export{_e as default};
